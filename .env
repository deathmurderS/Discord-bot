# =================================================================
# K3I MONITOR BOT CONFIGURATION
# =================================================================
# Copy this file to .env and update the values below
# Never commit your .env file to version control!

# =================================================================
# REQUIRED CONFIGURATION
# =================================================================

# Discord Bot Token (REQUIRED)
# Get from: https://discord.com/developers/applications
# 1. Create New Application → Bot → Reset Token → Copy Token
# 2. Enable "Message Content Intent" in Bot settings
# 3. Invite bot to server with proper permissions
DISCORD_BOT_TOKEN=your_discord_bot_token_here

# Discord Server ID where bot will be active (REQUIRED)
# How to get Server ID:
# 1. Enable Developer Mode: Discord Settings → Advanced → Developer Mode ON
# 2. Right-click server name → Copy ID
# 3. Paste the 17-19 digit number below
DISCORD_SERVER_ID=your_server_id_here

# =================================================================
# APPLICATION CONFIGURATION
# =================================================================

# Environment mode
NODE_ENV=development

# HTTP server port for API endpoints and monitoring
PORT=3001

# Bot application name (for logging and monitoring)
BOT_NAME=K3I Monitor Bot

# Bot version (automatically detected from package.json if not set)
# BOT_VERSION=1.0.0

# =================================================================
# MONITORING CONFIGURATION
# =================================================================

# Update interval for Discord status (in seconds)
# Default: 30 seconds (real-time as requested)
STATUS_UPDATE_INTERVAL=30

# API endpoint timeout (in milliseconds)
API_TIMEOUT=5000

# Maximum number of historical records to keep
MAX_HISTORY_RECORDS=10000

# =================================================================
# DATABASE CONFIGURATION
# =================================================================

# Database file path (SQLite)
# Default: data/k3i_monitor.db
DATABASE_PATH=data/k3i_monitor.db

# Enable database logging
DATABASE_LOGGING=false

# =================================================================
# LOGGING CONFIGURATION
# =================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable file logging
ENABLE_FILE_LOGGING=true

# Log file path
LOG_FILE=logs/k3i-monitor.log

# Enable console colors in logs
LOG_COLORS=true

# =================================================================
# DEVELOPMENT & TESTING CONFIGURATION
# =================================================================

# Enable debug mode (more verbose logging)
DEBUG_MODE=false

# Test mode (simulate user counts without API)
TEST_MODE=false

# Simulated user count range for test mode
TEST_MIN_USERS=10
TEST_MAX_USERS=100

# Development mode features
DEV_MODE=false

# =================================================================
# INTEGRATION CONFIGURATION
# =================================================================

# Backend API endpoint (for receiving user count data)
# This should be the endpoint from your NestJS backend
# Format: http://your-backend-domain.com/api/k3i/user-count
BACKEND_API_ENDPOINT=http://localhost:3000/api/k3i/user-count

# API authentication token (if required)
# BACKEND_API_TOKEN=your_api_token_here

# Enable CORS for API endpoints
ENABLE_CORS=true

# =================================================================
# EXAMPLES & TROUBLESHOOTING
# =================================================================

# Example working configuration:
# DISCORD_BOT_TOKEN=YOUR_BOT_TOKEN
# DISCORD_SERVER_ID=YOUR_SERVER_ID
# STATUS_UPDATE_INTERVAL=30
# NODE_ENV=production
# PORT=3001

# Common Issues & Solutions:
# 
# 1. "Invalid token" error:
#    - Regenerate token in Discord Developer Portal
#    - Ensure token is copied completely without extra spaces
#    - Check that bot has "Message Content Intent" enabled
#
# 2. "Missing permissions" error:
#    - Bot needs "Send Messages" and "Embed Links" permissions
#    - Check channel-specific permission overrides
#    - Ensure bot role is above mentioned roles in hierarchy
#
# 3. "Server not found" error:
#    - Verify server ID is correct (17-19 digits)
#    - Ensure bot is added to the server
#    - Check that bot has proper server permissions
#
# 4. API connection issues:
#    - Check BACKEND_API_ENDPOINT is correct
#    - Verify backend server is running
#    - Check network connectivity
#    - Review API timeout settings
#
# 5. Database issues:
#    - Ensure data/ directory exists and is writable
#    - Check file permissions for database file
#    - Verify SQLite3 dependency is installed
#
# 6. Status update not working:
#    - Check STATUS_UPDATE_INTERVAL is set correctly
#    - Verify bot has proper permissions
#    - Check API endpoint is responding
#    - Review logs for specific error messages

# =================================================================
# QUICK START CHECKLIST
# =================================================================
#
# □ 1. Copy this file to .env
# □ 2. Get Discord bot token from https://discord.com/developers/applications
# □ 3. Enable "Message Content Intent" in bot settings
# □ 4. Get server ID (Developer Mode → Right-click server → Copy ID)
# □ 5. Update DISCORD_BOT_TOKEN and DISCORD_SERVER_ID above
# □ 6. Invite bot to server with proper permissions
# □ 7. Install dependencies: npm install
# □ 8. Start bot: npm start
# □ 9. Check logs for any errors
# □ 10. Test API endpoint with sample data